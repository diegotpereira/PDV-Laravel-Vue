// jQuery CEP Correios v1.1
// GitHub: https://github.com/webmaniabr/jQuery-CEP-Correios
// Author: WebmaniaBR
// Author URI: webmaniabr.com
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(o,r){return void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(o)),e(r),r}:e(jQuery)}(function(e){correios={init:function(e,o){window.correios_app_key=e,window.correios_app_secret=o}},e.fn.correios=function(o,r,a,t,n,i){var c;return"undefined"==typeof correios_app_key&&(console.log("Informe o app_key da sua aplicação dos Correios."),c=!0),"undefined"==typeof correios_app_secret&&(console.log("Informe o app_secret da sua aplicação dos Correios."),c=!0),!c&&(window.c_endereco=o,window.c_bairro=r,window.c_cidade=a,window.c_uf=t,window.c_loading=n,window.c_readonly=i,e(this).on("keyup",function(){if(cep=e(this).val().replace(/[^0-9]/g,""),8==cep.length){if(localStorage.getItem("correios_request")){if(date=localStorage.getItem("correios_request"),current_time=(new Date).getTime(),between=Math.round((current_time-date)/1e3),between<=5)return!1;localStorage.removeItem("correios_request"),localStorage.setItem("correios_request",(new Date).getTime())}else localStorage.setItem("correios_request",(new Date).getTime());c_loading&&e(c_loading).show(),e.getJSON("https://webmaniabr.com/api/1/cep/"+cep+"/?app_key="+correios_app_key+"&app_secret="+correios_app_secret,function(n){if(c_loading&&e(c_loading).hide(),(c_endereco||e(o).val())&&(e(o).val(n.endereco),"boolean"==typeof c_readonly&&1==c_readonly&&n.endereco?e(o).attr("readonly","readonly"):e(o).removeAttr("readonly")),(c_bairro||e(r).val())&&(e(r).val(n.bairro),"boolean"==typeof c_readonly&&1==c_readonly&&n.bairro?e(r).attr("readonly","readonly"):e(r).removeAttr("readonly")),(c_cidade||e(a).val())&&(e(a).val(n.cidade),"boolean"==typeof c_readonly&&1==c_readonly&&n.cidade?e(a).attr("readonly","readonly"):e(a).removeAttr("readonly")),c_uf||e(t).val()){if(first_value=e(t+" option:eq(2)").val(),first_value.length>2){var i={};e(t).find("option").each(function(){i[e(this).text()]=e(this).attr("value")}),n.uf=i[{AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PE:"Pernambuco",PI:"Piauí",PR:"Paraná",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"}[n.uf]]}e(t).on("correios_clean_select",function(){e(t).find("option").removeAttr("disabled").removeAttr("selected")}),"boolean"==typeof c_readonly&&1==c_readonly&&e(t).trigger("correios_clean_select"),e(t).find('option[value="'+n.uf+'"]').attr("selected","selected"),"boolean"==typeof c_readonly&&1==c_readonly&&n.uf&&e(t).find(":not(:selected)").prop("disabled",!0),e(t).val(n.uf).trigger("change"),void 0!==e.fn.select2&&e(t).select2()}}).always(function(){localStorage.removeItem("correios_request")})}}),this)}});
